var _showSH_CONSTANT=true,_showZT_CONSTANT=true,_showCX_CONSTANT=true,_showNew_CONSTANT=0;
function _addInsideLabel(a){a=thisMovie(a.mapId);a=getMapObj(a.id);var b=new MMapTools(a),c=a.getSize(),d=null,e=false,f=a.getPngMap();if(f){f=f.split(",");var k=f[0],g=f[1];if(f[2]=="true")e=true;b.addPngMap_(k,g,e)}if(c.width>=300&&c.height>=300){if(e)d=_GD("pngImg0_");b.addNewBusiness();b.addSearchButton();b.addSpecialLayer();b=a.mapComButton;f=document.getElementById("MapTool_cont1");k=document.getElementById("MapTool_cont");g=document.getElementById("searchLabel_");var h=document.getElementById("Business_buttion");
if(b=="111"){h.style.display="";g.style.display="";f.style.display="";_showCX_CONSTANT=_showZT_CONSTANT=_showSH_CONSTANT=true;if(e){_showNew_CONSTANT=6;d.style.right=c.width>=400?"275px":"95px"}if(a.zoom<10){h.style.display="none";g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="001"){h.style.display="";g.style.display="none";f.style.display="none";_showSH_CONSTANT=true;_showZT_CONSTANT=_showCX_CONSTANT=false;if(e){_showNew_CONSTANT=1;d.style.right=c.width>=400?
"95px":"35px"}if(a.zoom<10){h.style.display="none";g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="010"){h.style.display="none";g.style.display="";g.style.right="10px";f.style.display="none";_showSH_CONSTANT=false;_showCX_CONSTANT=true;_showZT_CONSTANT=false;if(e){_showNew_CONSTANT=1;d.style.right=c.width>=400?"95px":"35px"}if(a.zoom<10){h.style.display="none";g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="100"){h.style.display=
"none";g.style.display="none";f.style.display="";f.style.right="10px";k.style.right="10px";_showCX_CONSTANT=_showSH_CONSTANT=false;_showZT_CONSTANT=true;if(e){_showNew_CONSTANT=1;d.style.right=c.width>=400?"95px":"35px"}if(a.zoom<10){h.style.display="none";g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="011"){h.style.display="";g.style.display="";f.style.display="none";_showZT_CONSTANT=false;_showCX_CONSTANT=_showSH_CONSTANT=true;if(e){_showNew_CONSTANT=2;d.style.right=
c.width>=400?"185px":"65px"}if(a.zoom<10){h.style.display="none";g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="101"){h.style.display="";g.style.display="none";f.style.display="";if(c.width>=400&&c.height>=300){f.style.right="100px";k.style.right="100px"}else{f.style.right="40px";k.style.right="10px"}_showCX_CONSTANT=false;_showSH_CONSTANT=_showZT_CONSTANT=true;if(e){_showNew_CONSTANT=2;d.style.right=c.width>=400?"185px":"65px"}if(a.zoom<10){h.style.display="none";
g.style.display="none";f.style.display="none";if(e)d.style.right="10px"}}else if(b=="110"){h.style.display="none";g.style.display="";f.style.display="";if(c.width>=400&&c.height>=300){g.style.right="10px";f.style.right="100px";k.style.right="100px"}else{g.style.right="10px";f.style.right="40px";k.style.right="10px"}_showSH_CONSTANT=false;_showZT_CONSTANT=_showCX_CONSTANT=true;if(e){_showNew_CONSTANT=2;d.style.right=c.width>=400?"185px":"65px"}if(a.zoom<10){h.style.display="none";g.style.display="none";
f.style.display="none";if(e)d.style.right="10px"}}else if(b=="000"){h.style.display="none";g.style.display="none";f.style.display="none";_showZT_CONSTANT=_showCX_CONSTANT=_showSH_CONSTANT=false;if(e){_showNew_CONSTANT=3;d.style.right="10px"}}}else if(e){d=_GD("pngImg0_");_showNew_CONSTANT=3;d.style.right="10px"}}MAPTOOLSEVENTOBJ_=M_LAYER_NAME_=null;
function MMapTools(a){this.map=a;this.map.MarkersIdArr_=[];this.map.trafficUserId="";this.map.isHaveMassOption=false;this.isSpecialLayer=true;this.zoomChanged=0}
MMapTools.prototype.addMassOverlay=function(a,b,c){M_LAYER_NAME_=b;if(a==MConstants.TRUE_MARKER){a=new MTileLayer(c.tileLayerType,c.tileLayerOptions);this.map.addTileLayer(a);if(c.tileLayerType==MConstants.TL_MASS_TRANSIT){this.map.trafficUserId=c.tileLayerOptions.userId;this.map.addEventListener(this.map,MConstants.MOUSE_CLICK,M_Search_SatialSearchByCenterXY,"insideEvent")}else this.map.addEventListener(this.map,MConstants.MOUSE_CLICK,M_SIS_CenterSearch,"insideEvent")}else if(a==MConstants.FALSE_MARKER){a=
new MTileLayer(c.tileLayerType,c.tileLayerOptions);this.map.addTileLayer(a);this.map.addDataLayer(new MDataLayer("",c.dataLayerOptions));this.map.addEventListener(this.map,MConstants.MOUSE_CLICK,M_SIS_PoiIdSearch,"insideEvent")}};
MMapTools.prototype.removeMassOverlay=function(a,b){if(a==MConstants.TRUE_MARKER){MAPTOOLSEVENTOBJ_&&MAPTOOLSEVENTOBJ_.removeMapToolsListener_("centerPoiSearch",addLightMarker_);var c=false;if(b){b.tileLayerType==MConstants.TL_MASS_TRANSIT?this.map.removeEventListener(this.map,MConstants.MOUSE_CLICK,M_Search_SatialSearchByCenterXY):this.map.removeEventListener(this.map,MConstants.MOUSE_CLICK,M_SIS_CenterSearch);if((b.tileLayerOptions?this.map.removeTileLayer(b.tileLayerType,b.tileLayerOptions.layerId):
this.map.removeTileLayer(b.tileLayerType))==0)c=true}for(var d=0;d<this.map.MarkersIdArr_.length;d++)this.map.removeOverlayById(this.map.MarkersIdArr_[d]);this.map.MarkersIdArr_=[];return c}else if(a==MConstants.FALSE_MARKER){MAPTOOLSEVENTOBJ_&&MAPTOOLSEVENTOBJ_.removeMapToolsListener_("poiIdSearch",addMarker_);this.map.removeEventListener(this.map,MConstants.MOUSE_CLICK,M_SIS_PoiIdSearch);b.tileLayerOptions?this.map.removeTileLayer(b.tileLayerType,b.tileLayerOptions.layerId):this.map.removeTileLayer(b.tileLayerType);
this.map.removeDataLayer("",b.dataLayerOptions.layerId)}this.map.closeTip()};
MMapTools.prototype.addBuildLayer=function(){var a=new MTileLayerOptions;a.tileUrl=["http://emap0.mapabc.com/theme/maptile?v=1.0&t=3&x=[x]&y=[y]&z=[z]","http://emap1.mapabc.com/theme/maptile?v=1.0&t=3&x=[x]&y=[y]&z=[z]","http://emap2.mapabc.com/theme/maptile?v=1.0&t=3&x=[x]&y=[y]&z=[z]","http://emap3.mapabc.com/theme/maptile?v=1.0&t=3&x=[x]&y=[y]&z=[z]"];a.layerId="building";a.alpha=1;this.map.addTileLayer(new MTileLayer(MConstants.TL_CUSTOM_MAP,a));this.map.getZoomLevel()<15&&this.map.setZoomLevel(15)};
MMapTools.prototype.removeBuildLayer=function(){this.map.removeTileLayer(MConstants.TL_CUSTOM_MAP,"building")};MMapTools.prototype.setCenterByCity=function(a){(a=MMCityList.ctall(a))&&this.map.setCenter(new MLngLat(a[2],a[3]))};function MassOverlayOptions(){this.tileLayerOptions=null;this.tileLayerType="";this.dataLayerOptions=null}
function M_SIS_CenterSearch(a){var b={};b.map=getMapObj(a.mapId);MAPTOOLSEVENTOBJ_=new MMapToolsEvent;MAPTOOLSEVENTOBJ_.addMapToolsListener_(b,"centerPoiSearch",addLightMarker_);a=new MLngLat(a.eventX,a.eventY);b=new MDynamicRenderingOptions;b.range=100;var c=new MDynamicRendering;c.setCallbackFunction(MDynamicRender_CenSearchCallback1);c.poiSearchByCenPoi(a,M_LAYER_NAME_,b)}
function MDynamicRender_CenSearchCallback1(a){a.error_message!=undefined?alert(a.error_message):MAPTOOLSEVENTOBJ_.dispatchMEvent("centerPoiSearch",a)}
function addLightMarker_(a){var b=a.map,c=a.data.list;a.cancelBubble=true;a=new MMarkerOptions;a.tipOption=new MTipOptions;if(c!=undefined){for(var d=0;d<b.MarkersIdArr_.length;d++)if(b.MarkersIdArr_[d]==c[0].id)return;b.MarkersIdArr_.push(c[0].id);if(c[0].name==undefined)c[0].name="";if(c[0].address==undefined)c[0].address="";a.tipOption.title=c[0].name;a.tipOption.content=c[0].address;a.tipOption.tipType=1;a.canShowTip=true;a.imageUrl="TransparentMarker";a.imageAlign=5;a.isDimorphic=true;a.alpha=
0;a=new MMarker(new MLngLat(c[0].x,c[0].y),a);a.id=c[0].id;b.addOverlay(a);b.openOverlayTip(c[0].id)}}
function M_Search_SatialSearchByCenterXY(a){var b={};b.map=getMapObj(a.mapId);MAPTOOLSEVENTOBJ_=new MMapToolsEvent;MAPTOOLSEVENTOBJ_.addMapToolsListener_(b,"centerPoiSearch",addtrafficMarker_);a=new MLngLat(a.eventX,a.eventY);var c=new MSpatialSearch,d=new MSpatialSearchOptions;d.Number=1;d.userId=b.map.trafficUserId;d.range=100;c.setCallbackFunction(M_Search_SatialSearchByCenterXY_Call);c.spatialSearchByCenterXY(a,d)}
function M_Search_SatialSearchByCenterXY_Call(a){a.error_message!=undefined?alert(a.error_message):MAPTOOLSEVENTOBJ_.dispatchMEvent("centerPoiSearch",a)}
function addtrafficMarker_(a){var b=new MMarkerOptions;b.tipOption=new MTipOptions;if(a.data.poilist!=undefined&&a.data.poilist!=""){for(var c=0;c<a.map.MarkersIdArr_.length;c++)if(a.map.MarkersIdArr_[c]==a.data.poilist[0].timestamp)return;a.map.MarkersIdArr_.push(a.data.poilist[0].timestamp);b.tipOption.title=a.data.poilist[0].uxml.CITYNAME+"\u8f68\u9053\u4ea4\u901a";b.tipOption.content="<b style='color:#000000; font-size:16px;'>"+a.data.poilist[0].uxml.STATIONNAME+"</b>";var d=a.data.poilist[0].uxml.LINECOLOR,
e=a.data.poilist[0].uxml.INFORMATION,f=c=null;if(d.indexOf("$")!=-1){c=d.split("$");f=e.split("$");for(e=d=0;e<f.length;d++,e++)b.tipOption.content+="<br><span style='line-height:25px;color:#fff;background:"+c[d]+"'>&nbsp;&nbsp;&nbsp;"+f[e]+"&nbsp;&nbsp;&nbsp;</span>"}else b.tipOption.content+="<br><span style='line-height:25px;color:#fff;background:"+a.data.poilist[0].uxml.LINECOLOR+"'>&nbsp;&nbsp;&nbsp;"+a.data.poilist[0].uxml.LINENAME+"&nbsp;&nbsp;&nbsp;</span>";b.tipOption.content+="<br><a href='http://www.mapabc.com'>mapabc.com</a>";
b.tipOption.tipType=1;b.canShowTip=true;b.imageUrl="TransparentMarker";b.imageAlign=5;b.alpha=0;b=new MMarker(new MLngLat(a.data.poilist[0].x,a.data.poilist[0].y),b);b.id=a.data.poilist[0].timestamp;a.map.addOverlay(b);a.map.openOverlayTip(b.id)}}
function M_SIS_PoiIdSearch(a){var b={};b.map=getMapObj(a.mapId);MAPTOOLSEVENTOBJ_=new MMapToolsEvent;MAPTOOLSEVENTOBJ_.addMapToolsListener_(b,"poiIdSearch",addMarker_);a=a.dotId;b=new MDynamicRenderingOptions;var c=new MDynamicRendering;c.setCallbackFunction(MDynamicRender_PoiSearchCallback1);c.poiSearchByPoiId(a,M_LAYER_NAME_,b)}function MDynamicRender_PoiSearchCallback1(a){a.error_message!=undefined?alert(a.error_message):MAPTOOLSEVENTOBJ_.dispatchMEvent("poiIdSearch",a)}
function addMarker_(a){var b=a.map;a=a.data.list;if(a!=undefined){var c=new MTipOptions;if(a[0].name==undefined)a[0].name="";if(a[0].address==undefined)a[0].address="";c.title=a[0].name;c.content=a[0].address;c.tipType=1;b.openTip(new MLngLat(a[0].x,a[0].y),c)}}massOpt_1=mapToolsObj_1=null;
MMapTools.prototype.addSpecialLayer=function(){var a=this.map.getSize();this.isSpecialLayer=true;mapToolsObj_1=this;var b=navigator.appName.indexOf("Microsoft")!=-1,c=this.map.id.substring(16,this.map.id.length);c=document.getElementById(c);var d=document.getElementById("MapTool_cont1");if(c!=null)if(d==null){d=document.createElement("DIV");d.id="MapTool_cont1";d.className="MFMP_MAPTOOLS_rightMenuCont1";d.style.top="5px";d.style.cursor="pointer";var e=document.createElement("DIV");e.id="MapTool_cont";
e.className="MFMP_MAPTOOLS_rightMenuCont";e.style.width="76px";e.style.display="none";e.style.border="1px solid #999";e.style.top="26px";var f=document.createElement("DIV");f.id="MapTool_clear";f.className="MFMP_MAPTOOLS_Clear";var k=new createDomOptions;k.domElement="IMG";k.id="M_CBtn_2";k.title="\u5173\u95ed";if(a.width>=400&&a.height>=300){k.src=FMP_baseURL.replace("js","images")+"big1.gif";d.style.width="78px"}else{k.src=FMP_baseURL.replace("js","images")+"small1.gif";d.style.width="20px";d.style.right=
"70px";e.style.right="10px"}k=new createDom(k);k.title="\u4e13\u9898\u5730\u56fe";var g=document.createElement("ul"),h=document.createElement("li");h.id="MapTool_textLi_1_";h.innerHTML+="<input type=\"checkbox\" name='checkbox' value='1' onclick='MapTool_hs_(1);'/><a href=\"javascript:MapTool_text_(1);\" class='a1' >\u8f68\u9053\u4ea4\u901a</a>";var j=document.createElement("li");j.id="MapTool_textLi_11_";j.innerHTML+="<input type=\"checkbox\" name='checkbox' value='2' onclick='MapTool_hs_(2);'/><a href=\"javascript:MapTool_text_(2);\" class='a1' >\u697c\u5757\u5730\u56fe</a>";
var l=document.createElement("li");l.id="MapTool_textLi_2_";l.style.textAlign="center";l.innerHTML=b?'<a href="#" onclick= "return false;" disabled=\'disabled\'>\u9690\u85cf\u5168\u90e8</a>':"<a href=\"#\" style='color:#999' onclick= \"return false;\" disabled='disabled'>\u9690\u85cf\u5168\u90e8</a>";d.appendChild(k);g.appendChild(h);g.appendChild(j);g.appendChild(l);e.appendChild(g);e.appendChild(f);c.appendChild(d);c.appendChild(e);_GD("MapTool_cont1").onclick=function(){if(_GD("MapTool_cont").style.display==
"")_GD("MapTool_cont").style.display="none";else{_GD("MapTool_cont").style.display="";if(_GD("_sPanel")&&_GD("spid")){_GD("_sPanel").style.display="none";_GD("spid").style.display="none";if(a.width>=400&&a.height>=300)_GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"big2.gif";else _GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"small2.gif"}}};b={};b.zoom=this.map.getZoomLevel();MapTools_ZoomChange(b);this.map.addEventListener(this.map,MConstants.ZOOM_CHANGED,MapTools_ZoomChange,"insideEvent");
document.getElementById("M_CBtn_2").onmouseover=function(){if(a.width>=400&&a.height>=300)document.getElementById("M_CBtn_2").src=FMP_baseURL.replace("js","images")+"big1_hover.gif";else document.getElementById("M_CBtn_2").src=FMP_baseURL.replace("js","images")+"small1_hover.gif"};document.getElementById("M_CBtn_2").onmouseout=function(){if(a.width>=400&&a.height>=300)document.getElementById("M_CBtn_2").src=FMP_baseURL.replace("js","images")+"big1.gif";else document.getElementById("M_CBtn_2").src=
FMP_baseURL.replace("js","images")+"small1.gif"}}else d.style.display="";k=c=l=h=f=d=g=e=null};MMapTools.prototype.removeSpecialLayer=function(){this.isSpecialLayer=false;this.zoomChanged=0;this.map.isHaveMassOption==true&&displayDiv();isSpecialLayer();this.map.removeEventListener(this.map,MConstants.ZOOM_CHANGED,MapTools_ZoomChange);this.map.isHaveMassOption=false};
function isSpecialLayer(){var a=document.getElementById("MapTool_cont1"),b=document.getElementById("MapTool_cont");if(a!=null)if(mapToolsObj_1.isSpecialLayer)if(9<mapToolsObj_1.zoomChanged&&mapToolsObj_1.zoomChanged<=18){if(_showZT_CONSTANT)a.style.display=""}else{if(getDomObject("divTip"+mapToolsObj_1.map.id)){var c=getDomObject("divTip"+mapToolsObj_1.map.id);getDomObject(mapToolsObj_1.map.id.substring(16,mapToolsObj_1.map.id.length)).removeChild(c)}b.style.display="none";a.style.display="none"}else{b.style.display=
"none";a.style.display="none"}}function MapTools_ZoomChange(a){mapToolsObj_1.zoomChanged=a.zoom;isSpecialLayer()}
function MapTool_text_(a){if(navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0")==-1)var b=document.all("checkbox");else{navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0");b=document.getElementsByName("checkbox")}var c=b.length;if(c==undefined){if(a=="1")b.checked=b.checked?false:true}else for(var d=0;d<c;d++)if(b[d].value==a)b[d].checked=b[d].checked?false:true;MapTool_hs_(a)}var s2=0;
function MapTool_hs_(a){mapToolsObj_1.map.isHaveMassOption=true;if(a=="1"){massOpt_1=new MassOverlayOptions;var b=new MTileLayerOptions;b.userId="10283";b.layerId="mapserver_2";massOpt_1.tileLayerOptions=b;massOpt_1.tileLayerType=MConstants.TL_MASS_TRANSIT}if(navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0")==-1)b=document.all("checkbox");else{navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0");b=document.getElementsByName("checkbox")}var c=
b.length;if(c==undefined){if(b.value==a)if(b.checked){s2+=1;if(a=="1")mapToolsObj_1.addMassOverlay(MConstants.TRUE_MARKER,"",massOpt_1);else a=="2"&&mapToolsObj_1.addBuildLayer()}else if(s2!=0){s2-=1;if(a=="1")mapToolsObj_1.removeMassOverlay(MConstants.TRUE_MARKER,massOpt_1);else a=="2"&&mapToolsObj_1.removeBuildLayer()}}else for(var d=0;d<c;d++)if(b[d].value==a)if(b[d].checked){s2+=1;if(a=="1")mapToolsObj_1.addMassOverlay(MConstants.TRUE_MARKER,"",massOpt_1);else a=="2"&&mapToolsObj_1.addBuildLayer()}else if(s2!=
0){s2-=1;if(a=="1")mapToolsObj_1.removeMassOverlay(MConstants.TRUE_MARKER,massOpt_1);else a=="2"&&mapToolsObj_1.removeBuildLayer()}a=document.getElementById("MapTool_textLi_2_");if(s2!=0){if(a!=null)a.innerHTML='<a href="javascript:var a = displayDiv();">\u9690\u85cf\u5168\u90e8</a>'}else if(a!=null){b=navigator.appName.indexOf("Microsoft")!=-1;a.innerHTML=b?'<a href="javascript:var a = displayDiv();" onclick= "return false;" disabled>\u9690\u85cf\u5168\u90e8</a>':"<a href=\"javascript:var a= displayDiv();\" style='color:#999' onclick= \"return false;\" disabled='disabled'>\u9690\u85cf\u5168\u90e8</a>"}}
function displayDiv(){var a=false;s2=0;if(navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0")==-1)var b=document.all("checkbox");else{navigator.appName.indexOf("Microsoft")!=-1&&navigator.appVersion.indexOf("MSIE 8.0");b=document.getElementsByName("checkbox")}var c=b.length;if(c==undefined)b.checked=false;else for(var d=0;d<c;d++)b[d].checked=false;if(mapToolsObj_1){a=mapToolsObj_1.removeMassOverlay(MConstants.TRUE_MARKER,massOpt_1);mapToolsObj_1.removeBuildLayer()}c=
document.getElementById("MapTool_textLi_2_");if(c!=null){d=navigator.appName.indexOf("Microsoft")!=-1;c.innerHTML=d?'<a href="javascript:var a = displayDiv();" onclick= "return false;" disabled>\u9690\u85cf\u5168\u90e8</a>':"<a href=\"javascript:var a = displayDiv();\" style='color:#999' onclick= \"return false;\" disabled='disabled'>\u9690\u85cf\u5168\u90e8</a>";for(d=0;d<b.length;d++)b[d].checked=false;return a}}
MMapTools.prototype.addPngMap_=function(a,b,c){var d=this.map.id.substring(16,this.map.id.length);if(d=document.getElementById(d)){var e=new createDomOptions;e.domElement="DIV";e.className="MFMP_pngImg0";e.id="pngImg0_";e.cursor="pointer";e=new createDom(e);e.title="\u65b0\u7248\u8bf4\u660e";var f=new createDomOptions;f.domElement="IMG";f=new createDom(f);f.src=FMP_baseURL.replace("js","images")+a;f.style.width="42px";f.style.height="20px";e.appendChild(f);d.appendChild(e);f.onclick=function(){window.open(b)};
if(!c)f.style.display="none";a={};a.zoom=this.map.getZoomLevel();business_zoomChange(a);this.map.addEventListener(this.map,MConstants.ZOOM_CHANGED,pngMap_zoomChange,"insideEvent")}};
function pngMap_zoomChange(a){var b=document.getElementById("pngImg0_"),c=thisMovie(a.mapId);c=getMapObj(c.id).getSize();if(b)if(9>=a.zoom){if(b.style.display!="none")b.style.right="10px"}else if(b.style.display!="none"){if(_showNew_CONSTANT==6)b.style.right=c.width>=400?"275px":"95px";if(_showNew_CONSTANT==1)b.style.right=c.width>=400?"95px":"35px";if(_showNew_CONSTANT==2)b.style.right=c.width>=400?"185px":"65px";if(_showNew_CONSTANT==3)b.style.right="10px"}}
MMapTools.prototype.addNewBusiness=function(){var a=this.map.id.substring(16,this.map.id.length);a=document.getElementById(a);var b=this.map.getSize();if(a)if(document.getElementById("Business_buttion"))document.getElementById("Business_buttion").style.display="";else{var c=new createDomOptions;c.domElement="DIV";c.className="MFMP_Business";c.id="Business_buttion";c.cursor="pointer";c=new createDom(c);var d=new createDomOptions;d.domElement="IMG";d.id="M_CBtn_1";if(b.width>=400&&b.height>=300){d.src=
FMP_baseURL.replace("js","images")+"big3.gif";c.style.width="80px"}else{d.src=FMP_baseURL.replace("js","images")+"small3.gif";c.style.width="20px"}c.style.height="18px";c.style.top="5px";d=new createDom(d);d.title="\u65b0\u589e\u5546\u6237";c.appendChild(d);a.appendChild(c);getDomObject("Business_buttion").onclick=function(){window.open("http://www.mapabc.com/DataChannel/add/index.html")};a={};a.zoom=this.map.getZoomLevel();business_zoomChange(a);this.map.addEventListener(this.map,MConstants.ZOOM_CHANGED,
business_zoomChange,"insideEvent");document.getElementById("M_CBtn_1").onmouseover=function(){if(b.width>=400&&b.height>=300)document.getElementById("M_CBtn_1").src=FMP_baseURL.replace("js","images")+"big3_hover.gif";else document.getElementById("M_CBtn_1").src=FMP_baseURL.replace("js","images")+"small3_hover.gif"};document.getElementById("M_CBtn_1").onmouseout=function(){if(b.width>=400&&b.height>=300)document.getElementById("M_CBtn_1").src=FMP_baseURL.replace("js","images")+"big3.gif";else document.getElementById("M_CBtn_1").src=
FMP_baseURL.replace("js","images")+"small3.gif"}}a=null};function business_zoomChange(a){var b=document.getElementById("Business_buttion");if(b)if(9<a.zoom&&a.zoom<=18){if(_showSH_CONSTANT)b.style.display=""}else b.style.display="none"}var MSearchMapObj=null;
MMapTools.prototype.addSearchButton=function(){var a=this.map.id.substring(16,this.map.id.length);a=document.getElementById(a);var b=this.map.getSize();MSearchMapObj=this.map;var c=document.getElementById("searchLabel_");if(a)if(c)c.style.display="";else{c=new createDomOptions;c.domElement="DIV";c.className="MFMP_btnchoose";c.id="searchLabel_";c.cursor="pointer";c=new createDom(c);var d=new createDomOptions;d.domElement="IMG";d.id="M_CBtn_3";if(b.width>=400&&b.height>=300){d.src=FMP_baseURL.replace("js",
"images")+"big2.gif";c.style.width="80px";c.style.height="18px";c.style.top="5px"}else{d.src=FMP_baseURL.replace("js","images")+"small2.gif";c.style.width="20px";c.style.height="18px";c.style.top="5px";c.style.right="40px"}b=new createDom(d);b.title="\u5b9e\u65f6\u641c\u7d22";c.appendChild(b);a.appendChild(c)}a={};a.zoom=this.map.getZoomLevel();search_zoomChange(a);this.map.addEventListener(this.map,MConstants.ZOOM_CHANGED,search_zoomChange,"insideEvent");document.getElementById("searchLabel_").onclick=
showSearchLabel};function _CD(a){return document.createElement(a)}function _GD(a){return document.getElementById(a)}
function search_zoomChange(a){var b=document.getElementById("searchLabel_"),c=_GD("_sPanel"),d=_GD("spid");if(b)if(9<a.zoom&&a.zoom<=18){if(_showCX_CONSTANT){b.style.display="";if(c)if(_GD("M_CBtn_3").src!=FMP_baseURL.replace("js","images")+"big2.gif")if(_GD("M_CBtn_3").src!=FMP_baseURL.replace("js","images")+"small2.gif"){c.style.display="";d.style.display=""}}}else{if(MarkerArrForDel.length>0){MSearchMapObj.removeOverlaysByType(MOverlay.TYPE_LIGHTMARKER);for(a=0;a<MarkerArrForDel.length;a++)MSearchMapObj.removeOverlayById(MarkerArrForDel[a])}b.style.display=
"none";if(c){c.style.display="none";d.style.display="none"}}}
function showSearchLabel(){if(_GD("MapTool_cont"))_GD("MapTool_cont").style.display="none";if(MSearchMapObj.getSize().width>=400&&MSearchMapObj.getSize().height>=300)_GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"big2_cur.gif";else _GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"small2_cur.gif";var a=MSearchMapObj.id.substring(16,MSearchMapObj.id.length);a=_GD(a);var b=_GD("_sPanel");if(a){if(b)if(b.style.display==""&&_GD("spid").style.display==""){b.style.display="none";_GD("spid").style.display=
"none";if(MSearchMapObj.getSize().width>=400&&MSearchMapObj.getSize().height>=300)_GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"big2.gif";else _GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"small2.gif"}else{b.style.display="";_GD("spid").style.display=""}else{var c=new _CD("DIV");c.id="spid";c.className="MFMP_tipbg";b=new _CD("div");b.id="_sPanel";b.className="MFMP_tipcontent";var d=new _CD("DIV");d.className="MFMP_title";var e=new _CD("div");e.className="MFMP_titleword";e.id="ttc1_1";
e.innerHTML="\u5728\u5730\u56fe\u8303\u56f4\u5185\u641c\u7d22";var f=new _CD("div");f.className="MFMP_close";var k=new _CD("img");k.id="closeSp";k.src=FMP_baseURL.replace("js","images")+"close.jpg";a.appendChild(c);f.appendChild(k);d.appendChild(e);d.appendChild(f);b.appendChild(d);c=new _CD("div");c.className="MFMP_detaile";d=new _CD("DIV");d.id="mshowLabel_";e=new _CD("div");e.id="mresultDeal_";e.style.display="none";d.innerHTML='\u9910\u996e\u670d\u52a1:<br /><a href="javascript:void(0)" onclick="javascript:_gkf(1101)">\u897f\u9910</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1102)">\u4e2d\u9910</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1103)">\u5feb\u9910</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1104)">\u5496\u5561\u5385</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1105)">\u9152\u5427</a><span class="MFMP_inlineblank"></span>\u751f\u6d3b\u4fbf\u5229:<br /><a href="javascript:void(0)" onclick="javascript:_gkf(1111)">\u697c\u76d8\u5c0f\u533a</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1112)">\u94f6\u884c</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1113)">ATM</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1114)">\u8d85\u5e02</a>&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1115)">\u836f\u5e97</a><br /><a href="javascript:void(0)" onclick ="javascript:_gkf(1116)">\u52a0\u6cb9\u7ad9</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1117)">\u505c\u8f66\u573a</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1118)">\u516c\u4ea4\u8f66\u7ad9</a><span class="MFMP_inlineblank"></span>\u5bbe\u9986:<br /><a href="javascript:void(0)" onclick="javascript:_gkf(1121)">\u661f\u7ea7\u5bbe\u9986</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1122)">\u5feb\u6377\u9152\u5e97</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1123)">\u62db\u5f85\u6240</a><span class="MFMP_inlineblank"></span>\u4f11\u95f2\u5a31\u4e50:<br /><a href="javascript:void(0)" onclick="javascript:_gkf(1131)">KTV</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1132)">\u7f51\u5427</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1133)">\u7535\u5f71\u9662</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0)" onclick="javascript:_gkf(1134)">\u5065\u8eab\u4e2d\u5fc3</a><span class="MFMP_inlineblank"></span><input name="" id="_sk_1" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" onclick="javascript:_gkf(9090)" type="button" value="\u641c\u7d22" />';
c.appendChild(d);c.appendChild(e);b.appendChild(c);a.appendChild(b);c=b=c=k=f=e=d=null}b=null}a=null;_GD("closeSp").onclick=function(){if(MSearchMapObj.getSize().width>=400&&MSearchMapObj.getSize().height>=300)_GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"big2.gif";else _GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"small2.gif";_GD("_sPanel").style.display="none";_GD("spid").style.display="none"}}SKeywordStore="";
function _gkf(a){switch(a){case 1101:SKeywordStore="\u897f\u9910";break;case 1102:SKeywordStore="\u4e2d\u9910";break;case 1103:SKeywordStore="\u5feb\u9910";break;case 1104:SKeywordStore="\u5496\u5561\u5385";break;case 1105:SKeywordStore="\u9152\u5427";break;case 1111:SKeywordStore="\u697c\u76d8\u5c0f\u533a";break;case 1112:SKeywordStore="\u94f6\u884c";break;case 1113:SKeywordStore="ATM";break;case 1114:SKeywordStore="\u8d85\u5e02";break;case 1115:SKeywordStore="\u836f\u5e97";break;case 1116:SKeywordStore=
"\u52a0\u6cb9\u7ad9";break;case 1117:SKeywordStore="\u505c\u8f66\u573a";break;case 1118:SKeywordStore="\u516c\u4ea4\u8f66\u7ad9";break;case 1121:SKeywordStore="\u661f\u7ea7\u5bbe\u9986";break;case 1122:SKeywordStore="\u5feb\u6377\u9152\u5e97";break;case 1123:SKeywordStore="\u62db\u5f85\u6240";break;case 1131:SKeywordStore="KTV";break;case 1132:SKeywordStore="\u7f51\u5427";break;case 1133:SKeywordStore="\u7535\u5f71\u9662";break;case 1134:SKeywordStore="\u5065\u8eab\u4e2d\u5fc3";break;case 9987:SKeywordStore=
_GD("sk_2_").value;if(_GD("sk_2_").value==""||_GD("sk_2_").value==undefined||_GD("sk_2_").value==null)return;break;default:if(_GD("_sk_1").value==""||_GD("_sk_1").value==undefined||_GD("_sk_1").value==null)return;SKeywordStore=_GD("_sk_1").value}MSearchMapObj.addEventListener(MSearchMapObj,MConstants.ZOOM_END,manageAllSearch);MSearchMapObj.addEventListener(MSearchMapObj,MConstants.MAP_MOVE_END,mapMoveFunc);manageAllSearch();_GD("mshowLabel_").style.display="none";_GD("mresultDeal_").style.display=
"";_GD("ttc1_1").innerHTML="\u5728\u5730\u56fe\u8303\u56f4\u5185\u641c\u7d22 --- "+SKeywordStore;a=new _CD("DIV");a.id="mresultUi_prt";a.className="MFMP_ulpre";var b=new _CD("UI");b.id="mresultUi";var c=new _CD("span");c.id="mpgnum_";c.className="MFMP_page";var d=new _CD("span");d.name="spanpg1_";d.id="spanpg1_";var e=new _CD("span");e.name="spanpg2_";e.id="spanpg2_";e.className="MFMP_clearword";e.innerHTML='<a href="javascript:clearResult_()">\u6e05\u9664\u7ed3\u679c</a>';var f=_CD("div");f.id="inputDiv_";
f.innerHTML=' <input name="" id = "sk_2_" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" type="button" value="\u641c\u7d22" onclick="javascript:_gkf(9987)"/>';if(!_GD("inputDiv_")){c.appendChild(e);c.appendChild(d);a.appendChild(b);_GD("mresultDeal_").appendChild(a);_GD("mresultDeal_").appendChild(c);_GD("mresultDeal_").appendChild(f)}}
function clearResult_(){MSearchMapObj.removeOverlaysByType(MOverlay.TYPE_LIGHTMARKER);for(var a=0;a<MarkerArrForDel.length;a++)MSearchMapObj.removeOverlayById(MarkerArrForDel[a]);_GD("mshowLabel_").style.display="";_GD("mresultDeal_").style.display="none";_GD("_sPanel").style.display="";_GD("spid").style.display="";_GD("mresultUi").innerHTML="";_GD("ttc1_1").innerHTML="\u5728\u5730\u56fe\u8303\u56f4\u5185\u641c\u7d22";ShowoPage("","","<font color='red'>","</font>","[<font color='red'>","</font>]",
0,8,1,1,"spanpg1_");if(MSearchMapObj.getSize().width>=400&&MSearchMapObj.getSize().height>=300)_GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"big2.gif";else _GD("M_CBtn_3").src=FMP_baseURL.replace("js","images")+"small2.gif";MSearchMapObj.removeEventListener(MSearchMapObj,MConstants.ZOOM_END,manageAllSearch);MSearchMapObj.removeEventListener(MSearchMapObj,MConstants.MAP_MOVE_END,mapMoveFunc);MSearchMapObj.removeEventListener(MSearchMapObj,MConstants.MOUSE_CLICK,dealTipToMampABC);MSearchMapObj.removeEventListener(MSearchMapObj,
MConstants.TIP_CLOSE,dealCssAndhightLight);if(solidMarkerArr.length>0)for(a=0;a<solidMarkerArr.length;a++)MSearchMapObj.removeEventListener(solidMarkerArr[a].id,MConstants.MOUSE_CLICK,solidMarkerCallBack_);SKeywordStore=null;ishaveTip_=false;NUMCONSTANTS=1;lightMarkerArr=[];solidMarkerArr=[];MarkerArrForDel=[];sxxdlnglat=_centerPoint_1=null}
function mapMoveFunc(a){var b=MSearchMapObj.getCenter(),c=[];c.push(b);c.push(_centerPoint_1);b=new MLngLat(_centerPoint_1.lngX,sxxdlnglat[0].latY);var d=new MLngLat(sxxdlnglat[0].lngX,_centerPoint_1.latY);b=MSearchMapObj.calculateDistance([b,_centerPoint_1])[0];d=MSearchMapObj.calculateDistance([d,_centerPoint_1])[0];c=MSearchMapObj.calculateDistance(c)[0];if(b<c||d<c)manageAllSearch(a)}
function manageAllSearch(a){if(a)if(a.zoom)if(a.zoom<10)return;ishaveTip_=_GD("divTip"+MSearchMapObj.id)?_GD("divTip"+MSearchMapObj.id).style.display==""||_GD("divTip"+MSearchMapObj.id).style.display=="block"?true:false:false;MSearchMapObj.removeEventListener(MSearchMapObj,MConstants.MOUSE_CLICK,dealTipToMampABC);MSearchMapObj.removeEventListener(MSearchMapObj,MConstants.MOUSE_CLICK,lightMarkerCallBack_);lightMarkerArr=[];MSearchMapObj.removeOverlaysByType(MOverlay.TYPE_LIGHTMARKER);for(a=0;a<MarkerArrForDel.length;a++)MSearchMapObj.removeOverlayById(MarkerArrForDel[a]);
MarkerArrForDel=[];isFirstSearch_=true;manageSearch()}var NUMCONSTANTS=1,MarkerArrForDel=[],_centerPoint_1=null,sxxdlnglat=null;function nextPageNum_func(){manage8Search(NUMCONSTANTS+1)}
function manage8Search(a){MSearchMapObj.removeOverlaysByType(MOverlay.TYPE_MARKER);if(solidMarkerArr.length>0)for(var b=0;b<solidMarkerArr.length;b++)MSearchMapObj.removeEventListener(solidMarkerArr[b].id,MConstants.MOUSE_CLICK,solidMarkerCallBack_);solidMarkerArr=[];a||(a=1);NUMCONSTANTS=a;var c=MSearchMapObj.getLngLatBounds();b=c.southWest;c=c.northEast;var d=[];d.push(new MLngLat(b.lngX,c.latY));d.push(new MLngLat(c.lngX,b.latY));b=new MLngLats(d);c=new MPoiSearchOptions;c.recordsPerPage=8;c.pageNum=
a;a=new MPoiSearch;a.setCallbackFunction(region8CallbackFunc);a.poiSearchByRegion("rectangle",b,SKeywordStore,c)}
function manageSearch(){var a=MSearchMapObj.getLngLatBounds(),b=a.southWest,c=a.northEast;a=[];a.push(new MLngLat(b.lngX,c.latY));a.push(new MLngLat(c.lngX,b.latY));b=new MLngLats(a);_centerPoint_1=MSearchMapObj.getCenter();sxxdlnglat=a;a=new MPoiSearchOptions;a.recordsPerPage=400;a.pageNum=1;c=new MPoiSearch;c.setCallbackFunction(regionCallbackFunc);c.poiSearchByRegion("rectangle",b,SKeywordStore,a)}var lightMarkerArr=[],solidMarkerArr=[];
function regionCallbackFunc(a){if(a.error_message!=undefined)alert(a.error_message);else{var b=a.searchresult;if(b.list){for(var c=0;c<b.list.length;c++){var d=b.list[c].x,e=b.list[c].y,f=b.list[c].name,k=b.list[c].address,g=b.list[c].pguid,h=100+c,j=FMP_baseURL.replace("js","images")+"dip_03.png";MSearchMapObj.createLightMarker(d,e,h,j,false,1,true,255);j=new MTipOptions;j.tipType=4;j.title='<span id="mncv_1">'+f+"</span>";j.tipWidth=300;j.tipHeight=218;j.content='<div class="MFMP1_maptipcontent">\u5730\u5740:<span id="mdzv_1">'+
k+'</span><div id ="mfxxx_1" class="MFMP1_share_area" style=""><div style="float:right; " id="mfxxx_1c"><img src="'+FMP_baseURL.replace("js","images")+'smallblist1.jpg" />&nbsp;<a href="javascript:void(0)" id="mfxa_">\u5206\u4eab</a>&nbsp;&nbsp;&nbsp;<img src="'+FMP_baseURL.replace("js","images")+'/smallblist2.jpg" />&nbsp;<a href="javascript:void(0)" id="mxxa_">\u8be6\u7ec6\u4fe1\u606f</a>&nbsp;&nbsp;</div></div>  <div class="MFMP1_share_area" style="display:none;" id="mfxxx_2"><input name="input" id="mfxvalue_" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" type="button" id="mcopyfx_" value="\u590d\u5236" />&nbsp;&nbsp;<input id ="mbackfx_" name="" type="button" value="\u8fd4\u56de" /></div>   <div class="MFMP1_taps"><ul>   <li id="m_dzlq_1" class="MFMP1_cur"><a  href="javascript:void(0) " onclick="javascript:m_dzlq()">\u5230\u8fd9\u91cc\u53bb</a></li>  <li id="m_czlcf_1" ><a href="javascript:void(0)" onclick="javascript:m_czlcf()">\u4ece\u8fd9\u91cc\u51fa\u53d1</a></li>   <li id="m_cfjz_1"><a href="javascript:void(0)" onclick="javascript:m_cfjz()">\u5728\u9644\u8fd1\u627e</a></li></ul>       <div id="m_zd_1" class="MFMP1_tap1_con" style=" display:none;">\u7ec8\u70b9:<input name="" id="m_zdv_" type="text" style=" width:190px;" /><Span style="margin-top:7px; width:100%; float:left;"><input name="" type="button" id="m_gj_2" value="\u516c\u4ea4" />&nbsp;&nbsp;<input name="" type="button" id="m_cjb_2" value="\u9a7e\u4e58" /></Span></div>      <div class="MFMP1_tap2_con" id = "m_qd_1">\u8d77\u70b9:<input name="" id="m_qdv_" type="text" style=" width:190px;" /><Span  style="margin-top:7px; width:100%; float:left; "><input name="" type="button" id="m_gj_1" value="\u516c\u4ea4" />&nbsp;&nbsp;<input name="" id="m_cjb_1" type="button" value="\u9a7e\u4e58" /></Span></div>      <div class="MFMP1_tap3_con" id="m_ss_1" style="display:none;"><a href="javascript:void(0)" id="_mas_1_">ATM</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_2_">\u94f6\u884c</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_3_">\u5bbe\u9986</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_4_">\u9910\u5385</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_5_">\u516c\u4ea4\u7ad9</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_6_">\u8d85\u5e02</a>&nbsp;<br>\u5176\u4ed6:<input name="" id="mqtv_1" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" type="button" value="\u641c\u7d22" id="mkrw_s" /></div></div></div>';
f={};f.x=d;f.y=e;f.tip=j;f.id=h;f.uid=g;lightMarkerArr.push(f)}MSearchMapObj.addEventListener(MSearchMapObj,MConstants.MOUSE_CLICK,lightMarkerCallBack_);region8CallbackFunc(a);if(ishaveTip_)for(c=0;c<lightMarkerArr.length;c++)if(MSignalFlag_==lightMarkerArr[c].uid){if(c<8){a=(parseInt(lightMarkerArr[c].id)-c)*1E3+c+"";_GD(a).className="MFMP1_res1";b=FMP_baseURL.replace("js","images");d=MSearchMapObj.getOverlayById(a);d.option.imageUrl=b+"lan1_"+(parseInt(a)-1E5+1)+".png";d.option.picAgent=false;MSearchMapObj.updateOverlay(d)}a=
{};a.eventX=lightMarkerArr[c].x;a.eventY=lightMarkerArr[c].y;MSearchMapObj.openTip(new MLngLat(lightMarkerArr[c].x,lightMarkerArr[c].y),lightMarkerArr[c].tip);(function(l){setTimeout(function(){dealTipToMampABC(l)},500)})(a);break}}else{_GD("mresultUi").innerHTML="\u6ca1\u6709\u6570\u636e";ShowoPage("","","<font color='red'>","</font>","[<font color='red'>","</font>]",0,8,1,NUMCONSTANTS,"spanpg1_")}}}var ishaveTip_=false,MSignalFlag_;
function lightMarkerCallBack_(a){var b=a.eventX;a=a.eventY;for(var c=MSearchMapObj.fromLngLatToContainerPixel(new MLngLat(b,a)),d=0;d<lightMarkerArr.length;d++){var e=MSearchMapObj.fromLngLatToContainerPixel(new MLngLat(lightMarkerArr[d].x,lightMarkerArr[d].y)),f=new MPoint(e.x-5,e.y-5);e=new MPoint(e.x+5,e.y+5);if((new MPixelBounds(f,e)).contains(c)){MSignalFlag_=lightMarkerArr[d].uid;ishaveTip_=true;MSearchMapObj.openTip(new MLngLat(b,a),lightMarkerArr[d].tip);break}}MSearchMapObj.addEventListener(MSearchMapObj,
MConstants.MOUSE_CLICK,dealTipToMampABC)}var isFirstSearch_=true;
function region8CallbackFunc(a){if(solidMarkerArr.length>0)for(var b=0;b<solidMarkerArr.length;b++)MSearchMapObj.removeEventListener(solidMarkerArr[b].id,MConstants.MOUSE_CLICK,solidMarkerCallBack_);solidMarkerArr=[];if(a.error_message!=undefined)alert(a.error_message);else{a=a.searchresult;var c=a.count;if(isFirstSearch_)if(parseInt(a.record)<8&&parseInt(a.count)>8)c=a.record;c||(c=0);isFirstSearch_=false;if(a.list)if(a.list==""){_GD("mresultUi").innerHTML="\u6ca1\u6709\u6570\u636e";ShowoPage("",
"","<font color='red'>","</font>","[<font color='red'>","</font>]",c,8,1,NUMCONSTANTS,"spanpg1_")}else{var d="",e=FMP_baseURL.replace("js","images"),f;f=a.list.length<=8?a.list.length:8;for(b=0;b<f;b++){var k=a.list[b].x,g=a.list[b].y,h=a.list[b].name,j=a.list[b].address,l=a.list[b].pguid,m=new MLngLat(k,g),n=new MTipOptions;n.tipType=4;n.title='<span id="mncv_1">'+h+"</span>";n.tipWidth=300;n.tipHeight=218;n.content='<div class="MFMP1_maptipcontent">\u5730\u5740:<span id="mdzv_1">'+j+'</span><div id ="mfxxx_1" class="MFMP1_share_area" style=""><div style="float:right; " id="mfxxx_1c"><img src="'+
FMP_baseURL.replace("js","images")+'smallblist1.jpg" />&nbsp;<a href="javascript:void(0)" id="mfxa_">\u5206\u4eab</a>&nbsp;&nbsp;&nbsp;<img src="'+FMP_baseURL.replace("js","images")+'smallblist2.jpg" />&nbsp;<a href="javascript:void(0)" id="mxxa_">\u8be6\u7ec6\u4fe1\u606f</a>&nbsp;&nbsp;</div></div>  <div class="MFMP1_share_area" style="display:none;" id="mfxxx_2"><input name="input" id="mfxvalue_" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" type="button" id="mcopyfx_" value="\u590d\u5236" />&nbsp;&nbsp;<input id ="mbackfx_" name="" type="button" value="\u8fd4\u56de" /></div>   <div class="MFMP1_taps"><ul>   <li id="m_dzlq_1" class="MFMP1_cur"><a  href="javascript:void(0) " onclick="javascript:m_dzlq()">\u5230\u8fd9\u91cc\u53bb</a></li>  <li id="m_czlcf_1" ><a href="javascript:void(0)" onclick="javascript:m_czlcf()">\u4ece\u8fd9\u91cc\u51fa\u53d1</a></li>   <li id="m_cfjz_1"><a href="javascript:void(0)" onclick="javascript:m_cfjz()">\u5728\u9644\u8fd1\u627e</a></li></ul>       <div id="m_zd_1" class="MFMP1_tap1_con" style=" display:none;">\u7ec8\u70b9:<input name="" id="m_zdv_" type="text" style=" width:190px;" /><Span style="margin-top:7px; width:100%; float:left;"><input name="" type="button" id="m_gj_2" value="\u516c\u4ea4" />&nbsp;&nbsp;<input name="" type="button" id="m_cjb_2" value="\u9a7e\u4e58" /></Span></div>      <div class="MFMP1_tap2_con" id = "m_qd_1">\u8d77\u70b9:<input name="" id="m_qdv_" type="text" style=" width:190px;" /><Span  style="margin-top:7px; width:100%; float:left; "><input name="" type="button" id="m_gj_1" value="\u516c\u4ea4" />&nbsp;&nbsp;<input name="" id="m_cjb_1" type="button" value="\u9a7e\u4e58" /></Span></div>      <div class="MFMP1_tap3_con" id="m_ss_1" style="display:none;"><a href="javascript:void(0)" id="_mas_1_">ATM</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_2_">\u94f6\u884c</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_3_">\u5bbe\u9986</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_4_">\u9910\u5385</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_5_">\u516c\u4ea4\u7ad9</a>&nbsp;&nbsp;<a href="javascript:void(0)" id="_mas_6_">\u8d85\u5e02</a>&nbsp;<br>\u5176\u4ed6:<input name="" id="mqtv_1" type="text" style=" width:130px;" />&nbsp;&nbsp;<input name="" type="button" value="\u641c\u7d22" id="mkrw_s" /></div></div></div>';
j=new MMarkerOptions;j.imageUrl=ishaveTip_?MSignalFlag_==l?e+"lan1_"+(b+1)+".png":e+"lan_"+(b+1)+".png":e+"lan_"+(b+1)+".png";j.imageAlign=5;j.picAgent=false;j.isDimorphic=true;j=new MMarker(m,j);m=1E5+b;j.id=m;MarkerArrForDel.push(m);MSearchMapObj.addOverlay(j);MSearchMapObj.addEventListener(m,MConstants.MOUSE_CLICK,solidMarkerCallBack_);d+='<li id ="'+m+'" style="list-style:none" ><img src="'+e+"tip_number"+(b+1)+'.jpg" />&nbsp;&nbsp;<a href="javascript:'+("_showTip1("+m+")")+'">'+h+"</a></li>";
h={};h.x=k;h.y=g;h.tip=n;h.id=m;h.uid=l;solidMarkerArr.push(h)}MSearchMapObj.addEventListener(MSearchMapObj,MConstants.TIP_CLOSE,dealCssAndhightLight);_GD("mresultUi").innerHTML=d;c>0&&ShowoPage("","\u4e0b\u4e00\u9875","<font color='red'>","</font>","[<font color='red'>","</font>]",c,8,1,NUMCONSTANTS,"spanpg1_");tcr_=tc_=null}else{_GD("mresultUi").innerHTML="\u6ca1\u6709\u6570\u636e";ShowoPage("","","<font color='red'>","</font>","[<font color='red'>","</font>]",c,8,1,NUMCONSTANTS,"spanpg1_")}}}
function dealCssAndhightLight(){for(var a=FMP_baseURL.replace("js","images"),b=0;b<solidMarkerArr.length;b++){_GD(solidMarkerArr[b].id).className="";var c=MSearchMapObj.getOverlayById(solidMarkerArr[b].id);if(c.option.imageUrl.indexOf("lan1_")!=-1){c.option.imageUrl=a+"lan_"+(parseInt(solidMarkerArr[b].id)-1E5+1)+".png";c.option.picAgent=false;MSearchMapObj.updateOverlay(c)}}}
function solidMarkerCallBack_(a){var b=a.eventX,c=a.eventY;a=a.overlayId;for(var d=FMP_baseURL.replace("js","images"),e=0;e<solidMarkerArr.length;e++){_GD(solidMarkerArr[e].id).className="";var f=MSearchMapObj.getOverlayById(solidMarkerArr[e].id);if(f.option.imageUrl.indexOf("lan1_")!=-1){f.option.imageUrl=d+"lan_"+(parseInt(solidMarkerArr[e].id)-1E5+1)+".png";f.option.picAgent=false;MSearchMapObj.updateOverlay(f)}}e=MSearchMapObj.getOverlayById(a);e.option.imageUrl=d+"lan1_"+(parseInt(a)-1E5+1)+
".png";e.option.picAgent=false;MSearchMapObj.updateOverlay(e);for(d=0;d<solidMarkerArr.length;d++)if(a==solidMarkerArr[d].id){MSignalFlag_=solidMarkerArr[d].uid;ishaveTip_=true;MSearchMapObj.openTip(new MLngLat(b,c),solidMarkerArr[d].tip);_GD(a).className="MFMP1_res1";break}MSearchMapObj.addEventListener(MSearchMapObj,MConstants.MOUSE_CLICK,dealTipToMampABC)}var xForMapabc_,yForMapabc_;
function dealTipToMampABC(a){var b=a.eventY;xForMapabc_=a.eventX;yForMapabc_=b;a=_GD("mncv_1").innerHTML;b=new MPoiSearch;var c=new MPoiSearchOptions;b.setCallbackFunction(geocodeCallBack);b.poiSearchByKeywords(a,"all",c)}
function geocodeCallBack(a){if(a.error_message!=undefined)alert(a.error_message);else{var b="",c="",d;if(_GD("mncv_1"))if(_GD("mdzv_1")){for(var e=_GD("mncv_1").innerHTML,f=_GD("mdzv_1").innerHTML,k=0;k<a.poilist.length;k++)if(e==a.poilist[k].name&&f==a.poilist[k].address){d=a.poilist[k].pguid;c=a.poilist[k].citycode;b=a.poilist[k].name;break}_GD("m_cjb_1").onclick=function(){var g=_GD("m_qdv_").value;window.open("http://www.mapabc.com/search.shtml?r,"+b+","+b+","+g+","+e)};_GD("m_gj_1").onclick=
function(){var g=_GD("m_qdv_").value;window.open("http://www.mapabc.com/search.shtml?b,"+b+","+b+","+g+","+e)};_GD("m_cjb_2").onclick=function(){var g=_GD("m_zdv_").value;window.open("http://www.mapabc.com/search.shtml?r,"+b+","+b+","+e+","+g)};_GD("m_gj_2").onclick=function(){var g=_GD("m_zdv_").value;window.open("http://www.mapabc.com/search.shtml?b,"+b+","+b+","+e+","+g)};_GD("_mas_1_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,ATM,"+xForMapabc_+
","+yForMapabc_+","+e+",5000")};_GD("_mas_2_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,\u94f6\u884c,"+xForMapabc_+","+yForMapabc_+","+e+",5000")};_GD("_mas_3_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,\u5bbe\u9986,"+xForMapabc_+","+yForMapabc_+","+e+",5000")};_GD("_mas_4_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,\u9910\u5385,"+xForMapabc_+","+yForMapabc_+
","+e+",5000")};_GD("_mas_5_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,\u516c\u4ea4\u7ad9,"+xForMapabc_+","+yForMapabc_+","+e+",5000")};_GD("_mas_6_").onclick=function(){window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,\u8d85\u5e02,"+xForMapabc_+","+yForMapabc_+","+e+",5000")};_GD("mkrw_s").onclick=function(){var g=_GD("mqtv_1").value;g&&window.open("http://www.mapabc.com/localsearch.shtml?xy,\u5168\u56fd, ,"+g+","+xForMapabc_+
","+yForMapabc_+","+e+",5000")};_GD("mfxa_").onclick=function(){_GD("mfxxx_1").style.display="none";_GD("mfxxx_2").style.display="";_GD("mfxvalue_").value="http://www.mapabc.com/simple.html?x="+xForMapabc_+"&y="+yForMapabc_+"&n="+e};_GD("mbackfx_").onclick=function(){_GD("mfxxx_1").style.display="";_GD("mfxxx_2").style.display="none"};_GD("mcopyfx_").onclick=function(){var g=_GD("mfxvalue_").value;copyToClipboardAll(g)};_GD("mxxa_").onclick=function(){window.open("http://www.mapabc.com/detail/"+c+
"/"+d+".html")}}}}
function copyToClipboardAll(a){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",a)}else if(navigator.userAgent.indexOf("Opera")!=-1)window.location=a;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){alert("\u4f60\u4f7f\u7528\u7684FireFox\u6d4f\u89c8\u5668,\u590d\u5236\u529f\u80fd\u88ab\u6d4f\u89c8\u5668\u62d2\u7edd\uff01\n\u8bf7\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 \u201cabout:config\u201d\u5e76\u56de\u8f66\u3002\n\u201csigned.applets.codebase_principal_support\u201d\u53cc\u51fb\uff0c\u8bbe\u7f6e\u4e3a  \u201ctrue\u201d");return}var c=
Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(c){var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(d){d.addDataFlavor("text/unicode");var e={};e=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);e.data=a;d.setTransferData("text/unicode",e,a.length*2);if(!c)return false;c.setData(d,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}}
function m_dzlq(){_GD("m_dzlq_1").className="MFMP1_cur";_GD("m_czlcf_1").className="";_GD("m_cfjz_1").className="";_GD("m_zd_1").style.display="none";_GD("m_qd_1").style.display="";_GD("m_ss_1").style.display="none"}function m_czlcf(){_GD("m_dzlq_1").className="";_GD("m_czlcf_1").className="MFMP1_cur";_GD("m_cfjz_1").className="";_GD("m_zd_1").style.display="";_GD("m_qd_1").style.display="none";_GD("m_ss_1").style.display="none"}
function m_cfjz(){_GD("m_dzlq_1").className="";_GD("m_czlcf_1").className="";_GD("m_cfjz_1").className="MFMP1_cur";_GD("m_zd_1").style.display="none";_GD("m_qd_1").style.display="none";_GD("m_ss_1").style.display=""}
function _showTip1(a){for(var b=FMP_baseURL.replace("js","images"),c=0;c<solidMarkerArr.length;c++){_GD(solidMarkerArr[c].id).className="";var d=MSearchMapObj.getOverlayById(solidMarkerArr[c].id);if(d.option.imageUrl.indexOf("lan1_")!=-1){d.option.imageUrl=b+"lan_"+(parseInt(solidMarkerArr[c].id)-1E5+1)+".png";d.option.picAgent=false;MSearchMapObj.updateOverlay(d)}}c=MSearchMapObj.getOverlayById(a);c.option.imageUrl=b+"lan1_"+(parseInt(a)-1E5+1)+".png";c.option.picAgent=false;MSearchMapObj.updateOverlay(c);
for(b=0;b<solidMarkerArr.length;b++)if(a==solidMarkerArr[b].id){MSignalFlag_=solidMarkerArr[b].uid;ishaveTip_=true;MSearchMapObj.openTip(new MLngLat(solidMarkerArr[b].x,solidMarkerArr[b].y),solidMarkerArr[b].tip);c={};c.eventX=solidMarkerArr[b].x;c.eventY=solidMarkerArr[b].y;(function(e){setTimeout(function(){dealTipToMampABC(e)},500)})(c);_GD(a).className="MFMP1_res1";break}}
function ShowoPage(a,b,c,d,e,f,k,g,h,j,l){PageCount=k%g==0?k/g:parseInt(k/g)+1;if(PageCount<=1)PageCount=1;prevpage=parseInt(j-1);if(prevpage<1)prevpage=1;nextpage=parseInt(j+1);if(nextpage>PageCount)nextpage=PageCount;if(j<=1&&PageCount==1){j=1;PrevPageUrl="&nbsp;"+a+"&nbsp;";NextPageUrl="&nbsp;"+b+"&nbsp;"}else if(j<=1){j=1;PrevPageUrl="&nbsp;"+a+"&nbsp;";NextPageUrl='&nbsp;<A href="javascript:nextPageNum_func();">'+b+"</A>&nbsp;"}else if(j>=PageCount){j=PageCount;PrevPageUrl='&nbsp;<A href="javascript:lastPageNum();">'+
a+"</A>&nbsp;";NextPageUrl="&nbsp;"+b+"&nbsp;"}else{j=j;PrevPageUrl='&nbsp;<A href="javascript:lastPageNum();">'+a+"</A>&nbsp;";NextPageUrl='&nbsp;<A href="javascript:nextPageNum_func();">'+b+"</A>&nbsp;"}PageStart=j-h<=1?1:j-h-(j>PageCount-h?h+j-PageCount:0);PageEnd=j+h>=PageCount?PageCount:j+h+(j-1<h?h-j+1:0);if(PageStart<1)PageStart=1;if(h*2+1>PageCount)PageEnd=PageCount;_GD(l).innerHTML=PrevPageUrl;for(i=PageStart;i<=PageEnd;i++)if(i==j)_GD(l).innerHTML+="&nbsp;"+e+i+f+"&nbsp;";else _GD(l).innerHTML+=
'&nbsp;<A href="javascript:manage8Search('+i+');">'+c+i+d+"</A>&nbsp;";_GD(l).innerHTML+=NextPageUrl}function MMapToolsEvent(){this.eventList=[]}MMapToolsEvent.prototype.addMapToolsListener_=function(a,b,c){for(var d=0;d<this.eventList.length;d++)if(this.eventList[d].functionName==c&&this.eventList[d].eventType==b)return false;d={};d.eventType=b;d.functionName=c;d.map=a.map;this.eventList[this.eventList.length]=d;return true};
MMapToolsEvent.prototype.dispatchMEvent=function(a,b){var c={};c.data=b;for(var d=0;d<this.eventList.length;d++)if(this.eventList[d].eventType==a){var e=this.eventList[d].functionName;c.map=this.eventList[d].map;e.call(e,c)}};MMapToolsEvent.prototype.removeMapToolsListener_=function(a,b){for(var c=0;c<this.eventList.length;c++)this.eventList[c].functionName==b&&this.eventList[c].eventType==a&&this.eventList.splice(c,1)};
